import React, { createContext, useState, useContext, ReactNode } from 'react';

type Language = 'en' | 'zh';

const translations = {
  en: {
    nav: {
      library: 'Library',
      studio: 'Studio',
      transcribe: 'Transcribe',
      audioLab: 'Audio Lab',
      favorites: 'Favorites',
      guide: 'Guide',
      login: 'Login',
      logout: 'Logout',
      settings: 'Settings',
    },
    user: {
      pro: 'Pro Plan',
    },
    lib: {
      title: 'Project Library',
      desc: 'Manage and organize your AI-generated soundscapes',
      new: 'Create New Project',
      newProject: 'New Project',
      editProject: 'Edit Project',
      projectName: 'Project Name',
      genre: 'Genre',
      tagsComma: 'Tags (comma separated)',
      cancel: 'Cancel',
      create: 'Create',
      save: 'Save',
      search: 'Search by name, tags, or style...',
      allModels: 'All Models',
      allStyles: 'All Styles',
      dateCreated: 'Date Created',
      loading: 'Loading projects...',
      edit: 'Edit',
      openInStudio: 'Open in Studio',
      delete: 'Delete',
      deleteConfirm: 'Are you sure you want to delete this project?',
      deleteFailed: 'Failed to delete project',
      comingSoon: 'Coming soon',
      projectNamePlaceholder: 'Enter project name...',
      tagsPlaceholder: 'tag1, tag2',
    },
    studio: {
      compose: 'Compose',
      mastering: 'Mastering',
      share: 'Share',
      shareCopied: 'Link copied to clipboard',
      untitled: 'Untitled Project 4',
      live: 'Live',
      modelConfig: 'Model Config',
      checkpoint: 'Checkpoint',
      tags: 'Tags',
      tagsComma: 'Style / mood / instruments (comma separated)',
      genSettings: 'Gen Settings',
      preset: 'Preset',
      save: 'Save',
      delete: 'Delete Preset',
      creativity: 'Creativity (Temp)',
      topk: 'Top-K Sampling',
      topkHint: 'Number of top candidates for sampling, default 50',
      maxAudioLengthMs: 'Max length max_audio_length_ms',
      maxAudioLengthMsHint: 'Milliseconds, default 240000 (~4 min)',
      cfgScaleHint: 'Conditional guidance strength, default 1.5',
      seamless: 'Seamless Loop',
      refAudio: 'Reference Audio',
      uploadRefAudio: 'Click to upload reference audio (MP3/WAV/FLAC)',
      uploading: 'Uploading...',
      refAudioHint: 'Optional: Upload a reference audio to guide the style of generated music',
      dropAudio: 'Drop audio to guide style (MP3/WAV)',
      taskHistory: 'Task History',
      noTasks: 'No generation tasks yet',
      untitledTask: 'Untitled Task',
      vram: 'VRAM Usage',
      cpuMode: 'CPU Mode',
      lyricEditor: 'LYRIC EDITOR',
      history: 'History',
      close: 'Close',
      genHistory: 'Generation History',
      noLyrics: 'No generated lyrics yet.',
      revert: 'Revert',
      aiSuggest: 'AI Suggest',
      tokens: 'Tokens',
      genre: 'Genre',
      mood: 'Mood',
      promptPlaceholder: 'Specific keywords, topics, or story elements...',
      generate: 'GENERATE',
      generating: 'GENERATING...',
      tracks: 'TRACKS',
      vocals: 'Vocals',
      instr: 'Instr.',
      backing: 'Backing Track',
      verse1: 'Verse 1',
      noSections: 'No sections',
      generated: '(Generated)',
      addSection: '+ Section',
      bpm: 'BPM',
      key: 'Key',
      export: 'Export',
      shortcuts: 'Shortcuts: Space to play/pause, ⌘+Enter to generate',
      clickToSeek: 'Click to seek',
      loading: 'Loading…',
      genError: 'Generation failed',
      updateProjectError: 'Update project failed',
      generateMusic: 'Generate Music',
      generateMusicHint: 'Enter lyrics above to enable',
      projectNotFound: 'Project not found or deleted',
      lyricsError: 'Lyrics generation failed. Check API Key or network.',
      lyricsErrorNoKey: 'API Key not set. Set OPENROUTER_API_KEY or GEMINI_API_KEY in project root .env',
      lyricsErrorEmpty: 'No lyrics content returned',
    },
    transcribe: {
      title: 'Lyrics Transcribe',
      subtitle: 'Upload audio to get lyrics / transcription',
      audioFile: 'Audio file',
      params: 'Parameters',
      submit: 'Submit task',
      submitting: 'Submitting…',
      taskDetail: 'Task detail',
      created: 'Created',
      preview: 'Preview',
      result: 'Transcription result (editable)',
      resultPlaceholder: 'Transcription text',
      saveResult: 'Save result',
      saving: 'Saving…',
      newTask: 'New task',
      selectFile: 'Please select an audio file',
    },
    lab: {
      title: 'AUDIO LAB',
      online: 'ONLINE',
      projects: 'Projects',
      clip: 'Clip',
      metronome: 'METRONOME',
      stemSep: 'Stem Separation',
      addStem: '+ Add Stem',
      promptInterp: 'Prompt Interpolation',
      aiActive: 'AI ACTIVE',
      start: 'START',
      end: 'END',
      exportMix: 'Export Mix',
      exportFormat: 'WAV (32-bit float) • 48kHz',
      comingSoon: 'Coming Soon',
      comingSoonDesc: 'Stem separation feature is under development. Stay tuned!',
    },
    guide: {
      title: 'Usage Guide',
      subtitle: 'Learn how to create music with DolphinHeartMula Studio',
      overview: 'Platform Overview',
      overviewDesc: 'DolphinHeartMula Studio is a professional AI music generation platform powered by the HeartMuLa model family. It enables you to create high-quality music from lyrics and style tags, with multi-language support including English, Chinese, Japanese, Korean, and Spanish.',
      quickStart: 'Quick Start',
      quickStartDesc: 'Get started with your first AI-generated song in just a few steps.',
      step1Title: '1. Create a Project',
      step1Desc: 'Go to the Library page, click "Create New Project", enter a project name and select a genre.',
      step2Title: '2. Open in Studio',
      step2Desc: 'Click on your project card to open it in the Studio workspace.',
      step3Title: '3. Write or Generate Lyrics',
      step3Desc: 'Type lyrics directly in the editor, or use the AI lyrics generator by selecting a genre, mood, language, and optional keywords, then click "GENERATE".',
      step4Title: '4. Select Tags',
      step4Desc: 'Choose style tags from four categories: Emotion/Atmosphere, Genre/Style, Instruments, and Scene/Vocal. You can also type comma-separated tags manually.',
      step5Title: '5. Adjust Generation Settings',
      step5Desc: 'Fine-tune parameters like Creativity (Temperature), Top-K Sampling, Max Audio Length, and CFG Scale.',
      step6Title: '6. Generate Music',
      step6Desc: 'Click the "Generate Music" button. The system will submit the task and poll for progress until the audio is ready.',
      step7Title: '7. Play, Export & Share',
      step7Desc: 'Once generated, use the transport bar to play back your track. Click "Export" to download the MP3, or "Share" to create a public sharing link.',
      musicGen: 'Music Generation (Detailed)',
      musicGenDesc: 'The core workflow for creating AI music.',
      lyricsSection: 'Lyrics',
      lyricsDesc: 'The lyrics editor supports structured sections. Use the toolbar to quickly insert section markers:',
      lyricsAI: 'AI Lyrics Generation',
      lyricsAIDesc: 'Select Genre, Mood, and Language from the dropdowns below the editor. Optionally enter specific keywords/topics, then click "GENERATE" to produce lyrics.',
      tagsSection: 'Tags',
      tagsDesc: 'Tags control the style, instruments, and mood of the generated music. Choose from four categories:',
      paramsSection: 'Generation Parameters',
      paramsDesc: 'Fine-tune the generation behavior:',
      paramTemp: 'Creativity (Temperature): Controls randomness. Higher = more creative, lower = more conservative. Range: 0.1-1.5, default: 0.85',
      paramTopK: 'Top-K Sampling: Number of top candidates. Range: 1-200, default: 50',
      paramLength: 'Max Audio Length: Maximum duration in milliseconds. Default: 240000 (~4 min), max: 600000 (~10 min)',
      paramCfg: 'CFG Scale: Conditional guidance strength. Range: 1.0-3.0, default: 1.5. Higher values follow instructions more strictly.',
      lyricsFormat: 'Lyrics Format Reference',
      lyricsFormatDesc: 'HeartMuLa expects lyrics with section markers in brackets. Recommended tags format: comma-separated without spaces.',
      transcribeSection: 'Lyrics Transcription',
      transcribeDesc: 'The Transcribe page uses HeartTranscriptor (a Whisper-based model) to extract lyrics from audio files.',
      projectSection: 'Project Management',
      projectDesc: 'The Library page lets you create, search, filter, edit, and delete music projects.',
      shortcutsSection: 'Keyboard Shortcuts',
      shortcutSpace: 'Space: Play / Pause audio',
      shortcutCmdEnter: 'Cmd/Ctrl + Enter: Generate audio',
      shareSection: 'Sharing',
      shareDesc: 'Click the "Share" button in Studio to create a public sharing link. Anyone with the link can listen, no login required.',
      tipsSection: 'Tips & Best Practices',
      tip1: 'Use structured section markers ([Verse], [Chorus], etc.) for best generation results.',
      tip2: 'Keep lyrics lines between 6-12 words (English) or 10-20 characters (Chinese) per line.',
      tip3: 'Combine 3-6 style tags for balanced control. Too many may conflict.',
      tip4: 'Start with default parameters and adjust gradually for fine-tuning.',
      tip5: 'Use the AI lyrics generator as a starting point and refine manually for the best outcome.',
    }
  },
  zh: {
    nav: {
      library: '项目库',
      studio: '工作室',
      transcribe: '歌词转录',
      audioLab: '音频实验室',
      favorites: '收藏',
      guide: '使用说明',
      login: '登录',
      logout: '退出',
      settings: '设置',
    },
    user: {
      pro: '专业版',
    },
    lib: {
      title: '项目库',
      desc: '管理和组织您的 AI 生成音景',
      new: '新建项目',
      newProject: '新建项目',
      editProject: '编辑项目',
      projectName: '项目名称',
      genre: '音乐类型',
      tagsComma: '标签（逗号分隔）',
      cancel: '取消',
      create: '创建',
      save: '保存',
      search: '按名称、标签或风格搜索...',
      allModels: '所有模型',
      allStyles: '全部风格',
      dateCreated: '创建日期',
      loading: '正在加载项目...',
      edit: '编辑',
      openInStudio: '在 Studio 中打开',
      delete: '删除',
      deleteConfirm: '确定要删除这个项目吗？',
      deleteFailed: '删除项目失败',
      comingSoon: '即将推出',
      projectNamePlaceholder: '输入项目名称...',
      tagsPlaceholder: 'tag1, tag2',
    },
    studio: {
      compose: '作曲',
      mastering: '母带',
      share: '分享',
      shareCopied: '链接已复制到剪贴板',
      untitled: '未命名项目 4',
      live: '实时',
      modelConfig: '模型配置',
      checkpoint: '检查点',
      tags: '标签',
      tagsComma: '风格/情绪/乐器，逗号分隔',
      genSettings: '生成设置',
      preset: '预设',
      save: '保存',
      delete: '删除预设',
      creativity: '创意度 (Temp)',
      topk: 'Top-K 采样',
      topkHint: '采样候选数量，默认 50',
      maxAudioLengthMs: '最大时长 max_audio_length_ms',
      maxAudioLengthMsHint: '毫秒，默认 240000（约 4 分钟）',
      cfgScaleHint: '条件引导强度，默认 1.5',
      seamless: '无缝循环',
      refAudio: '参考音频',
      uploadRefAudio: '点击上传参考音频 (MP3/WAV/FLAC)',
      uploading: '上传中...',
      refAudioHint: '可选：上传参考音频以引导生成音乐的风格',
      dropAudio: '拖放音频以引导风格 (MP3/WAV)',
      taskHistory: '生成历史',
      noTasks: '暂无生成任务',
      untitledTask: '未命名任务',
      vram: '显存使用',
      cpuMode: 'CPU 模式',
      lyricEditor: '歌词编辑器',
      history: '历史',
      close: '关闭',
      genHistory: '生成历史',
      noLyrics: '暂无生成歌词。',
      revert: '恢复',
      aiSuggest: 'AI 建议',
      tokens: 'Token数',
      genre: '流派',
      mood: '情绪',
      promptPlaceholder: '特定关键词、主题或故事元素...',
      generate: '生成',
      generating: '生成中...',
      tracks: '轨道',
      vocals: '人声',
      instr: '器乐',
      backing: '伴奏',
      verse1: '第一节',
      noSections: '无章节',
      generated: '(已生成)',
      addSection: '+ 章节',
      bpm: 'BPM',
      key: '调式',
      export: '导出',
      shortcuts: '快捷键：空格 播放/暂停，⌘+Enter 生成',
      clickToSeek: '点击跳转',
      loading: '加载中…',
      genError: '生成失败',
      updateProjectError: '更新项目失败',
      generateMusic: '生成音频',
      generateMusicHint: '请在上方填写歌词后启用',
      projectNotFound: '项目不存在或已删除',
      lyricsError: '歌词生成失败，请检查 API Key 或网络',
      lyricsErrorNoKey: '未配置 API Key，请在项目根目录 .env 中设置 OPENROUTER_API_KEY 或 GEMINI_API_KEY',
      lyricsErrorEmpty: '未返回歌词内容',
    },
    transcribe: {
      title: '歌词转录',
      subtitle: '上传音频获取歌词 / 转写文本',
      audioFile: '音频文件',
      params: '参数',
      submit: '提交任务',
      submitting: '提交中…',
      taskDetail: '任务详情',
      created: '创建时间',
      preview: '试听',
      result: '转写结果（可编辑）',
      resultPlaceholder: '转写文本',
      saveResult: '保存结果',
      saving: '保存中…',
      newTask: '新建任务',
      selectFile: '请选择音频文件',
    },
    lab: {
      title: '音频实验室',
      online: '在线',
      projects: '项目',
      clip: '剪辑',
      metronome: '节拍器',
      stemSep: '分轨分离',
      addStem: '+ 添加分轨',
      promptInterp: '提示词插值',
      aiActive: 'AI 激活',
      start: '开始',
      end: '结束',
      exportMix: '导出混音',
      exportFormat: 'WAV (32-bit float) • 48kHz',
      comingSoon: '即将推出',
      comingSoonDesc: '分轨分离功能正在开发中，敬请期待！',
    },
    guide: {
      title: '\u4f7f\u7528\u8bf4\u660e',
      subtitle: '\u4e86\u89e3\u5982\u4f55\u4f7f\u7528 DolphinHeartMula Studio \u521b\u4f5c\u97f3\u4e50',
      overview: '\u5e73\u53f0\u6982\u89c8',
      overviewDesc: 'DolphinHeartMula Studio \u662f\u57fa\u4e8e HeartMuLa \u6a21\u578b\u5bb6\u65cf\u7684\u4e13\u4e1a AI \u97f3\u4e50\u751f\u6210\u5e73\u53f0\u3002\u652f\u6301\u901a\u8fc7\u6b4c\u8bcd\u548c\u98ce\u683c\u6807\u7b7e\u751f\u6210\u9ad8\u8d28\u91cf\u97f3\u4e50\uff0c\u591a\u8bed\u8a00\u652f\u6301\u5305\u62ec\u82f1\u8bed\u3001\u4e2d\u6587\u3001\u65e5\u8bed\u3001\u97e9\u8bed\u548c\u897f\u73ed\u7259\u8bed\u3002',
      quickStart: '\u5feb\u901f\u5f00\u59cb',
      quickStartDesc: '\u53ea\u9700\u51e0\u6b65\u5373\u53ef\u751f\u6210\u4f60\u7684\u7b2c\u4e00\u9996 AI \u97f3\u4e50\u3002',
      step1Title: '1. \u521b\u5efa\u9879\u76ee',
      step1Desc: '\u524d\u5f80\u9879\u76ee\u5e93\u9875\u9762\uff0c\u70b9\u51fb\u201c\u65b0\u5efa\u9879\u76ee\u201d\uff0c\u8f93\u5165\u540d\u79f0\u5e76\u9009\u62e9\u97f3\u4e50\u7c7b\u578b\u3002',
      step2Title: '2. \u5728\u5de5\u4f5c\u5ba4\u4e2d\u6253\u5f00',
      step2Desc: '\u70b9\u51fb\u9879\u76ee\u5361\u7247\uff0c\u5728 Studio \u5de5\u4f5c\u533a\u4e2d\u6253\u5f00\u3002',
      step3Title: '3. \u7f16\u5199\u6216\u751f\u6210\u6b4c\u8bcd',
      step3Desc: '\u76f4\u63a5\u5728\u7f16\u8f91\u5668\u4e2d\u8f93\u5165\u6b4c\u8bcd\uff0c\u6216\u4f7f\u7528 AI \u6b4c\u8bcd\u751f\u6210\u5668\uff1a\u9009\u62e9\u6d41\u6d3e\u3001\u60c5\u7eea\u3001\u8bed\u8a00\u548c\u5173\u952e\u8bcd\u540e\u70b9\u51fb\u201c\u751f\u6210\u201d\u3002',
      step4Title: '4. \u9009\u62e9\u6807\u7b7e',
      step4Desc: '\u4ece\u56db\u5927\u5206\u7c7b\u4e2d\u9009\u53d6\u98ce\u683c\u6807\u7b7e\uff1a\u60c5\u7eea/\u6c1b\u56f4\u3001\u6d41\u6d3e/\u98ce\u683c\u3001\u4e50\u5668/\u97f3\u8272\u3001\u573a\u666f/\u4eba\u58f0\u3002\u4e5f\u53ef\u624b\u52a8\u8f93\u5165\u9017\u53f7\u5206\u9694\u7684\u6807\u7b7e\u3002',
      step5Title: '5. \u8c03\u6574\u751f\u6210\u53c2\u6570',
      step5Desc: '\u5fae\u8c03\u521b\u610f\u5ea6\uff08Temperature\uff09\u3001Top-K \u91c7\u6837\u3001\u6700\u5927\u97f3\u9891\u65f6\u957f\u548c CFG Scale \u7b49\u53c2\u6570\u3002',
      step6Title: '6. \u751f\u6210\u97f3\u4e50',
      step6Desc: '\u70b9\u51fb\u201c\u751f\u6210\u97f3\u9891\u201d\u6309\u94ae\uff0c\u7cfb\u7edf\u5c06\u63d0\u4ea4\u4efb\u52a1\u5e76\u8f6e\u8be2\u8fdb\u5ea6\uff0c\u76f4\u5230\u97f3\u9891\u5c31\u7eea\u3002',
      step7Title: '7. \u64ad\u653e\u3001\u5bfc\u51fa\u4e0e\u5206\u4eab',
      step7Desc: '\u751f\u6210\u5b8c\u6210\u540e\uff0c\u4f7f\u7528\u64ad\u653e\u6761\u8bd5\u542c\u3002\u70b9\u51fb\u201c\u5bfc\u51fa\u201d\u4e0b\u8f7d MP3\uff0c\u6216\u70b9\u51fb\u201c\u5206\u4eab\u201d\u521b\u5efa\u516c\u5f00\u5206\u4eab\u94fe\u63a5\u3002',
      musicGen: '\u97f3\u4e50\u751f\u6210\u8be6\u89e3',
      musicGenDesc: '\u521b\u4f5c AI \u97f3\u4e50\u7684\u6838\u5fc3\u5de5\u4f5c\u6d41\u7a0b\u3002',
      lyricsSection: '\u6b4c\u8bcd',
      lyricsDesc: '\u6b4c\u8bcd\u7f16\u8f91\u5668\u652f\u6301\u7ed3\u6784\u5316\u7ae0\u8282\uff0c\u4f7f\u7528\u5de5\u5177\u680f\u5feb\u901f\u63d2\u5165\u7ae0\u8282\u6807\u8bb0\uff1a',
      lyricsAI: 'AI \u6b4c\u8bcd\u751f\u6210',
      lyricsAIDesc: '\u5728\u7f16\u8f91\u5668\u4e0b\u65b9\u9009\u62e9\u6d41\u6d3e\u3001\u60c5\u7eea\u548c\u8bed\u8a00\uff0c\u53ef\u9009\u586b\u5173\u952e\u8bcd/\u4e3b\u9898\uff0c\u7136\u540e\u70b9\u51fb\u201c\u751f\u6210\u201d\u3002\u53ef\u67e5\u770b\u5386\u53f2\u8bb0\u5f55\u5e76\u6062\u590d\u5230\u4e4b\u524d\u7684\u7248\u672c\u3002',
      tagsSection: '\u6807\u7b7e',
      tagsDesc: '\u6807\u7b7e\u63a7\u5236\u751f\u6210\u97f3\u4e50\u7684\u98ce\u683c\u3001\u4e50\u5668\u548c\u60c5\u7eea\u3002\u4ece\u56db\u5927\u5206\u7c7b\u4e2d\u9009\u62e9\uff1a',
      paramsSection: '\u751f\u6210\u53c2\u6570',
      paramsDesc: '\u5fae\u8c03\u751f\u6210\u884c\u4e3a\uff1a',
      paramTemp: '\u521b\u610f\u5ea6 (Temperature)\uff1a\u63a7\u5236\u968f\u673a\u6027\u3002\u8d8a\u9ad8\u8d8a\u6709\u521b\u610f\uff0c\u8d8a\u4f4e\u8d8a\u4fdd\u5b88\u3002\u8303\u56f4\uff1a0.1-1.5\uff0c\u9ed8\u8ba4\uff1a0.85',
      paramTopK: 'Top-K \u91c7\u6837\uff1a\u91c7\u6837\u5019\u9009\u6570\u91cf\u3002\u8303\u56f4\uff1a1-200\uff0c\u9ed8\u8ba4\uff1a50',
      paramLength: '\u6700\u5927\u97f3\u9891\u65f6\u957f\uff1a\u6700\u5927\u65f6\u957f\uff08\u6beb\u79d2\uff09\u3002\u9ed8\u8ba4\uff1a240000\uff08\u7ea6 4 \u5206\u949f\uff09\uff0c\u6700\u5927\uff1a600000\uff08\u7ea6 10 \u5206\u949f\uff09',
      paramCfg: 'CFG Scale\uff1a\u6761\u4ef6\u5f15\u5bfc\u5f3a\u5ea6\u3002\u8303\u56f4\uff1a1.0-3.0\uff0c\u9ed8\u8ba4\uff1a1.5\u3002\u503c\u8d8a\u9ad8\u8d8a\u4e25\u683c\u9075\u5faa\u6307\u4ee4\u3002',
      lyricsFormat: '\u6b4c\u8bcd\u683c\u5f0f\u53c2\u8003',
      lyricsFormatDesc: 'HeartMuLa \u6a21\u578b\u671f\u671b\u6b4c\u8bcd\u5e26\u6709\u65b9\u62ec\u53f7\u7ae0\u8282\u6807\u8bb0\u3002\u63a8\u8350\u6807\u7b7e\u683c\u5f0f\uff1a\u9017\u53f7\u5206\u9694\u65e0\u7a7a\u683c\uff0c\u5982 piano,happy,wedding,synthesizer,romantic',
      transcribeSection: '\u6b4c\u8bcd\u8f6c\u5f55',
      transcribeDesc: '\u8f6c\u5f55\u9875\u9762\u4f7f\u7528 HeartTranscriptor\uff08\u57fa\u4e8e Whisper \u7684\u6a21\u578b\uff09\u4ece\u97f3\u9891\u6587\u4ef6\u63d0\u53d6\u6b4c\u8bcd\u3002\u4e0a\u4f20 MP3/WAV/FLAC \u6587\u4ef6\uff0c\u53ef\u9009\u8c03\u6574\u9ad8\u7ea7\u53c2\u6570\u540e\u63d0\u4ea4\u3002\u5b8c\u6210\u540e\u53ef\u7f16\u8f91\u5e76\u4fdd\u5b58\u8f6c\u5f55\u7ed3\u679c\u3002',
      projectSection: '\u9879\u76ee\u7ba1\u7406',
      projectDesc: '\u9879\u76ee\u5e93\u9875\u9762\u53ef\u521b\u5efa\u3001\u641c\u7d22\u3001\u7b5b\u9009\u3001\u7f16\u8f91\u548c\u5220\u9664\u97f3\u4e50\u9879\u76ee\u3002',
      shortcutsSection: '\u5feb\u6377\u952e',
      shortcutSpace: '\u7a7a\u683c\u952e\uff1a\u64ad\u653e / \u6682\u505c',
      shortcutCmdEnter: '\u2318/Ctrl + Enter\uff1a\u751f\u6210\u97f3\u9891\uff08\u7f16\u8f91\u6b4c\u8bcd\u65f6\u4e5f\u53ef\u4f7f\u7528\uff09',
      shareSection: '\u5206\u4eab',
      shareDesc: '\u751f\u6210\u97f3\u4e50\u540e\uff0c\u70b9\u51fb\u5de5\u4f5c\u5ba4\u9876\u680f\u7684\u201c\u5206\u4eab\u201d\u6309\u94ae\u521b\u5efa\u516c\u5f00\u5206\u4eab\u94fe\u63a5\u3002\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u901a\u8fc7\u94fe\u63a5\u6536\u542c\u4f60\u7684\u4f5c\u54c1\uff0c\u65e0\u9700\u767b\u5f55\u3002',
      tipsSection: '\u4f7f\u7528\u6280\u5de7',
      tip1: '\u4f7f\u7528\u7ed3\u6784\u5316\u7ae0\u8282\u6807\u8bb0\uff08[Verse]\u3001[Chorus] \u7b49\uff09\u4ee5\u83b7\u5f97\u6700\u4f73\u751f\u6210\u6548\u679c\u3002',
      tip2: '\u6bcf\u884c\u6b4c\u8bcd\u63a7\u5236\u5728 6-12 \u4e2a\u5355\u8bcd\uff08\u82f1\u6587\uff09\u6216 10-20 \u4e2a\u5b57\u7b26\uff08\u4e2d\u6587\uff09\u3002',
      tip3: '\u7ec4\u5408 3-6 \u4e2a\u98ce\u683c\u6807\u7b7e\u4ee5\u83b7\u5f97\u5747\u8861\u7684\u63a7\u5236\uff0c\u8fc7\u591a\u6807\u7b7e\u53ef\u80fd\u4ea7\u751f\u51b2\u7a81\u3002',
      tip4: '\u5148\u4f7f\u7528\u9ed8\u8ba4\u53c2\u6570\uff0c\u7136\u540e\u9010\u6b65\u8c03\u6574\u4ee5\u5fae\u8c03\u6548\u679c\u3002',
      tip5: '\u5c06 AI \u751f\u6210\u7684\u6b4c\u8bcd\u4f5c\u4e3a\u8d77\u70b9\uff0c\u624b\u52a8\u4fee\u6539\u4ee5\u83b7\u5f97\u6700\u4f73\u6548\u679c\u3002',
    }
  }
};

interface LanguageContextProps {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const LanguageContext = createContext<LanguageContextProps | undefined>(undefined);

export const LanguageProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [language, setLanguage] = useState<Language>('en');

  const t = (key: string) => {
    const keys = key.split('.');
    let value: any = translations[language];
    for (const k of keys) {
      if (value && value[k]) {
        value = value[k];
      } else {
        return key;
      }
    }
    return value as string;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useTranslation = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useTranslation must be used within a LanguageProvider');
  }
  return context;
};
